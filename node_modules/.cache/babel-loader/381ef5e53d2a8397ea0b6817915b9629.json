{"ast":null,"code":"import _classCallCheck from \"D:\\\\SocialNetWork\\\\Social-Network\\\\SocialNetwork\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\SocialNetWork\\\\Social-Network\\\\SocialNetwork\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\SocialNetWork\\\\Social-Network\\\\SocialNetwork\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\SocialNetWork\\\\Social-Network\\\\SocialNetwork\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\SocialNetWork\\\\Social-Network\\\\SocialNetwork\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\SocialNetWork\\\\Social-Network\\\\SocialNetwork\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\SocialNetWork\\\\Social-Network\\\\SocialNetwork\\\\Client\\\\src\\\\components\\\\user\\\\UserFriendRequestsPage.js\";\nimport React, { Component, Fragment } from 'react';\nimport { userService } from '../../infrastructure';\nimport { toast } from 'react-toastify';\nimport { ToastComponent } from '../common';\nimport FriendRequest from './FriendRequest';\nimport './css/UserFriends.css';\nimport { connect } from 'react-redux';\nimport { changeCurrentTimeLineUserAction, changeAllFriendsAction, findFriendsAction, cancelRequestAction, confirmRequestAction } from '../../store/actions/userActions';\nimport { changeAllPicturesAction } from '../../store/actions/pictureActions';\n\nvar UserFriendRequestsPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UserFriendRequestsPage, _Component);\n\n  function UserFriendRequestsPage(props) {\n    var _this;\n\n    _classCallCheck(this, UserFriendRequestsPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UserFriendRequestsPage).call(this, props));\n\n    _this.confirmRequest = function (friendToAcceptId) {\n      var loggedInUserId = _this.props.loggedInUserData.id;\n\n      _this.props.acceptRequest(loggedInUserId, friendToAcceptId);\n    };\n\n    _this.rejectRequest = function (friendToRejectId) {\n      var loggedInUserId = _this.props.loggedInUserData.id;\n\n      _this.props.cancelRequest(loggedInUserId, friendToRejectId);\n    };\n\n    _this.state = {\n      userWaitingForAcceptingRequest: [],\n      ready: false\n    };\n    _this.confirmRequest = _this.confirmRequest.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.rejectRequest = _this.rejectRequest.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(UserFriendRequestsPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var loggedInUserId = userService.getUserId();\n\n      if (loggedInUserId !== this.props.timeLineUserData.id) {\n        this.props.changeTimeLineUser(loggedInUserId);\n        this.props.changeAllPictures(loggedInUserId);\n        this.props.changeAllFriends(loggedInUserId);\n      }\n\n      this.props.findFriends(loggedInUserId);\n      this.setState({\n        ready: true\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var errorMessage = this.getErrorMessage(prevProps);\n      var successMessage = this.getSuccessMessage(prevProps);\n\n      if (errorMessage) {\n        toast.error(React.createElement(ToastComponent.errorToast, {\n          text: errorMessage,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42\n          },\n          __self: this\n        }), {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      } else if (successMessage) {\n        toast.success(React.createElement(ToastComponent.successToast, {\n          text: successMessage,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        }), {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      }\n    }\n  }, {\n    key: \"getSuccessMessage\",\n    value: function getSuccessMessage(prevProps) {\n      if (!this.props.findFriendsData.hasError && this.props.findFriendsData.message && this.props.findFriendsData !== prevProps.findFriendsData) {\n        return this.props.findFriendsData.message;\n      } else if (!this.props.cancelRequestData.hasError && this.props.cancelRequestData.message && this.props.cancelRequestData !== prevProps.cancelRequestData) {\n        return this.props.cancelRequestData.message;\n      } else if (!this.props.confirmRequestData.hasError && this.props.confirmRequestData.message && this.props.confirmRequestData !== prevProps.confirmRequestData) {\n        return this.props.confirmRequestData.message;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getErrorMessage\",\n    value: function getErrorMessage(prevProps) {\n      if (this.props.findFriendsData.hasError && prevProps.findFriendsData.error !== this.props.findFriendsData.error) {\n        return this.props.findFriendsData.message || 'Server Error';\n      } else if (this.props.cancelRequestData.hasError && prevProps.cancelRequestData.error !== this.props.cancelRequestData.error) {\n        return this.props.cancelRequestData.message || 'Server Error';\n      } else if (this.props.confirmRequestData.hasError && prevProps.confirmRequestData.error !== this.props.confirmRequestData.error) {\n        return this.props.confirmRequestData.message || 'Server Error';\n      }\n\n      return null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var loading = this.props.findFriendsData.loading;\n\n      if (!this.state.ready || loading) {\n        return null; // return <h1 className=\"text-center pt-5 mt-5\">Loading...</h1>\n      }\n\n      var requestLength = this.props.userWaitingForAcceptingRequest.length;\n      var requests = '';\n\n      if (requestLength > 0) {\n        requests = React.createElement(Fragment, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }, React.createElement(\"h3\", {\n          className: \"mt-5\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, \"Respond to Your Friend Requests\"), React.createElement(\"div\", {\n          className: \"hr-styles\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }), this.props.userWaitingForAcceptingRequest.map(function (friend) {\n          return React.createElement(FriendRequest, Object.assign({\n            key: friend.id\n          }, _this2.props, friend, {\n            firstButtonText: 'CONFIRM',\n            secondButtonText: 'REJECT',\n            thirdButtonText: 'VIEW PROFILE',\n            firstButtonOnClick: _this2.confirmRequest,\n            secondButtonOnClick: _this2.rejectRequest,\n            thirdButtonLink: \"/home/profile/\".concat(friend.id),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 108\n            },\n            __self: this\n          }));\n        }));\n      }\n\n      if (!requests) {\n        requests = React.createElement(Fragment, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, \"There are no friend requests!\"), React.createElement(\"div\", {\n          className: \"hr-styles\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }));\n      }\n\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"article\", {\n        className: \"main-article-shared-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"section\", {\n        className: \"friend-content-section\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container col-md-12 text-center mb-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"text-center font-weight-bold mt-4\",\n        style: {\n          'margin': '1rem auto'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"Friend Requests\"), React.createElement(\"div\", {\n        className: \"hr-styles\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }), React.createElement(\"section\", {\n        className: \"friend-section\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, requests)))));\n    }\n  }]);\n\n  return UserFriendRequestsPage;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    timeLineUserData: state.timeLineUserData,\n    loggedInUserData: state.loggedInUserData,\n    findFriendsData: state.findFriends,\n    userWaitingForAcceptingRequest: state.findFriends.userWaitingForAcceptingRequest,\n    cancelRequestData: state.cancelRequest,\n    confirmRequestData: state.confirmRequest\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    changeTimeLineUser: function changeTimeLineUser(userId) {\n      dispatch(changeCurrentTimeLineUserAction(userId));\n    },\n    changeAllFriends: function changeAllFriends(userId) {\n      dispatch(changeAllFriendsAction(userId));\n    },\n    changeAllPictures: function changeAllPictures(userId) {\n      dispatch(changeAllPicturesAction(userId));\n    },\n    findFriends: function findFriends(userId) {\n      dispatch(findFriendsAction(userId));\n    },\n    cancelRequest: function cancelRequest(loggedInUserId, friendToRejectId) {\n      dispatch(cancelRequestAction(loggedInUserId, friendToRejectId));\n    },\n    acceptRequest: function acceptRequest(loggedInUserId, friendToAcceptId) {\n      dispatch(confirmRequestAction(loggedInUserId, friendToAcceptId));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserFriendRequestsPage);","map":{"version":3,"sources":["D:\\SocialNetWork\\Social-Network\\SocialNetwork\\Client\\src\\components\\user\\UserFriendRequestsPage.js"],"names":["React","Component","Fragment","userService","toast","ToastComponent","FriendRequest","connect","changeCurrentTimeLineUserAction","changeAllFriendsAction","findFriendsAction","cancelRequestAction","confirmRequestAction","changeAllPicturesAction","UserFriendRequestsPage","props","confirmRequest","friendToAcceptId","loggedInUserId","loggedInUserData","id","acceptRequest","rejectRequest","friendToRejectId","cancelRequest","state","userWaitingForAcceptingRequest","ready","bind","getUserId","timeLineUserData","changeTimeLineUser","changeAllPictures","changeAllFriends","findFriends","setState","prevProps","prevState","errorMessage","getErrorMessage","successMessage","getSuccessMessage","error","position","POSITION","TOP_RIGHT","success","findFriendsData","hasError","message","cancelRequestData","confirmRequestData","loading","requestLength","length","requests","map","friend","mapStateToProps","mapDispatchToProps","dispatch","userId"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\r\nimport {userService} from '../../infrastructure';\r\nimport { toast } from 'react-toastify';\r\nimport { ToastComponent } from '../common'\r\nimport FriendRequest from './FriendRequest';\r\nimport './css/UserFriends.css';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { changeCurrentTimeLineUserAction, changeAllFriendsAction, findFriendsAction, cancelRequestAction, confirmRequestAction } from '../../store/actions/userActions';\r\nimport { changeAllPicturesAction } from '../../store/actions/pictureActions';\r\n\r\nclass UserFriendRequestsPage extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            userWaitingForAcceptingRequest: [],\r\n            ready: false,\r\n        };\r\n\r\n        this.confirmRequest = this.confirmRequest.bind(this);\r\n        this.rejectRequest = this.rejectRequest.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        const loggedInUserId = userService.getUserId();\r\n        if (loggedInUserId !== this.props.timeLineUserData.id) {\r\n            this.props.changeTimeLineUser(loggedInUserId);\r\n            this.props.changeAllPictures(loggedInUserId);\r\n            this.props.changeAllFriends(loggedInUserId);\r\n        }\r\n\r\n        this.props.findFriends(loggedInUserId);\r\n        this.setState({ ready: true });\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        const errorMessage = this.getErrorMessage(prevProps);\r\n        const successMessage = this.getSuccessMessage(prevProps)\r\n\r\n        if (errorMessage) {\r\n            toast.error(<ToastComponent.errorToast text={errorMessage} />, {\r\n                position: toast.POSITION.TOP_RIGHT\r\n            });\r\n        } else if (successMessage) {\r\n            toast.success(<ToastComponent.successToast text={successMessage} />, {\r\n                position: toast.POSITION.TOP_RIGHT\r\n            });\r\n        }\r\n    }\r\n\r\n    getSuccessMessage(prevProps) {\r\n        if (!this.props.findFriendsData.hasError && this.props.findFriendsData.message && this.props.findFriendsData !== prevProps.findFriendsData) {\r\n            return this.props.findFriendsData.message;\r\n        }\r\n        else if (!this.props.cancelRequestData.hasError && this.props.cancelRequestData.message && this.props.cancelRequestData !== prevProps.cancelRequestData) {\r\n            return this.props.cancelRequestData.message;\r\n        }\r\n        else if (!this.props.confirmRequestData.hasError && this.props.confirmRequestData.message && this.props.confirmRequestData !== prevProps.confirmRequestData) {\r\n            return this.props.confirmRequestData.message;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    getErrorMessage(prevProps) {\r\n        if (this.props.findFriendsData.hasError && prevProps.findFriendsData.error !== this.props.findFriendsData.error) {\r\n            return this.props.findFriendsData.message || 'Server Error';\r\n        }\r\n        else if (this.props.cancelRequestData.hasError && prevProps.cancelRequestData.error !== this.props.cancelRequestData.error) {\r\n            return this.props.cancelRequestData.message || 'Server Error';\r\n        }\r\n        else if (this.props.confirmRequestData.hasError && prevProps.confirmRequestData.error !== this.props.confirmRequestData.error) {\r\n            return this.props.confirmRequestData.message || 'Server Error';\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    confirmRequest = (friendToAcceptId) => {\r\n        const loggedInUserId = this.props.loggedInUserData.id;\r\n        this.props.acceptRequest(loggedInUserId, friendToAcceptId);\r\n    }\r\n\r\n    rejectRequest = (friendToRejectId) => {\r\n        const loggedInUserId = this.props.loggedInUserData.id;\r\n        this.props.cancelRequest(loggedInUserId, friendToRejectId);\r\n    }\r\n\r\n\r\n    render() {\r\n        const loading = this.props.findFriendsData.loading;\r\n\r\n        if (!this.state.ready || loading) {\r\n            return null;\r\n            // return <h1 className=\"text-center pt-5 mt-5\">Loading...</h1>\r\n        }\r\n\r\n        const requestLength = this.props.userWaitingForAcceptingRequest.length;\r\n        let requests = '';\r\n\r\n        if (requestLength > 0) {\r\n            requests = (\r\n                <Fragment>\r\n                    <h3 className=\"mt-5\">Respond to Your Friend Requests</h3>\r\n                    <div className=\"hr-styles\"></div>\r\n                    {this.props.userWaitingForAcceptingRequest.map((friend) =>\r\n                        <FriendRequest\r\n                            key={friend.id}\r\n                            {...this.props}\r\n                            {...friend}\r\n                            firstButtonText={'CONFIRM'}\r\n                            secondButtonText={'REJECT'}\r\n                            thirdButtonText={'VIEW PROFILE'}\r\n                            firstButtonOnClick={this.confirmRequest}\r\n                            secondButtonOnClick={this.rejectRequest}\r\n                            thirdButtonLink={`/home/profile/${friend.id}`}\r\n                        />)}\r\n                </Fragment>\r\n            )\r\n        }\r\n\r\n        if (!requests) {\r\n            requests = (\r\n                <Fragment>\r\n                    <h2>There are no friend requests!</h2>\r\n                    <div className=\"hr-styles\"></div>\r\n                </Fragment>)\r\n        }\r\n\r\n        return (\r\n            <Fragment>\r\n                <article className=\"main-article-shared-content\">\r\n                    <section className=\"friend-content-section\">\r\n                        <div className=\"container col-md-12 text-center mb-5\">\r\n                            <h1 className=\"text-center font-weight-bold mt-4\" style={{ 'margin': '1rem auto' }}>\r\n                                Friend Requests\r\n                            </h1>\r\n                            <div className=\"hr-styles\"></div>\r\n                            <section className=\"friend-section\" >\r\n                                {requests}\r\n                            </section>\r\n                        </div>\r\n                    </section>\r\n                </article>\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        timeLineUserData: state.timeLineUserData,\r\n        loggedInUserData: state.loggedInUserData,\r\n\r\n        findFriendsData: state.findFriends,\r\n        userWaitingForAcceptingRequest: state.findFriends.userWaitingForAcceptingRequest,\r\n\r\n        cancelRequestData: state.cancelRequest,\r\n        confirmRequestData: state.confirmRequest,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        changeTimeLineUser: (userId) => { dispatch(changeCurrentTimeLineUserAction(userId)) },\r\n        changeAllFriends: (userId) => { dispatch(changeAllFriendsAction(userId)) },\r\n        changeAllPictures: (userId) => { dispatch(changeAllPicturesAction(userId)) },\r\n        findFriends: (userId) => { dispatch(findFriendsAction(userId)) },\r\n        cancelRequest: (loggedInUserId, friendToRejectId) => { dispatch(cancelRequestAction(loggedInUserId, friendToRejectId)) },\r\n        acceptRequest: (loggedInUserId, friendToAcceptId) => { dispatch(confirmRequestAction(loggedInUserId, friendToAcceptId)) },\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserFriendRequestsPage);"]},"metadata":{},"sourceType":"module"}